---
interface Props {
  size?: "small" | "medium" | "large";
  showText?: boolean;
  text?: string;
  className?: string;
}

const { 
  size = "medium", 
  showText = true, 
  text = "Loading...", 
  className = "" 
} = Astro.props;

const sizeClasses = {
  small: "w-16 h-16",
  medium: "w-24 h-24",
  large: "w-32 h-32",
};

const iconSizes = {
  small: 32,
  medium: 48,
  large: 64,
};
---

<div class={`flex flex-col items-center justify-center ${className}`}>
  <div class={`relative ${sizeClasses[size]} mb-4`}>
    <!-- Sun rotating animation -->
    <div class="absolute inset-0 animate-spin-slow">
      <svg
        width={iconSizes[size]}
        height={iconSizes[size]}
        viewBox="0 0 48 48"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g>
          <!-- Sun rays -->
          <path
            d="M24 4V8M24 40V44M8 24H4M44 24H40M35.36 12.64L38.18 9.82M9.82 38.18L12.64 35.36M12.64 12.64L9.82 9.82M38.18 38.18L35.36 35.36"
            stroke="#F38810"
            stroke-width="2"
            stroke-linecap="round"
          />
          <!-- Sun center -->
          <circle
            cx="24"
            cy="24"
            r="10"
            fill="#F38810"
            stroke="#F38810"
            stroke-width="2"
          />
          <!-- Inner sun detail -->
          <circle
            cx="24"
            cy="24"
            r="6"
            fill="none"
            stroke="rgba(255, 255, 255, 0.3)"
            stroke-width="1"
          />
        </g>
      </svg>
    </div>
    
    <!-- Grain falling animation -->
    <div class="absolute inset-0 animate-grain-fall">
      <svg
        width={iconSizes[size]}
        height={iconSizes[size]}
        viewBox="0 0 48 48"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g>
          <!-- Grain particles -->
          <circle cx="12" cy="8" r="2" fill="#F38810" opacity="0.9" />
          <circle cx="36" cy="12" r="1.5" fill="#F38810" opacity="0.7" />
          <circle cx="24" cy="16" r="2.5" fill="#F38810" opacity="0.8" />
          <circle cx="8" cy="20" r="1.5" fill="#F38810" opacity="0.6" />
          <circle cx="40" cy="24" r="2" fill="#F38810" opacity="0.9" />
          <circle cx="16" cy="28" r="2" fill="#F38810" opacity="0.8" />
          <circle cx="32" cy="32" r="1.5" fill="#F38810" opacity="0.7" />
          <circle cx="20" cy="36" r="2.5" fill="#F38810" opacity="0.9" />
          <circle cx="28" cy="40" r="2" fill="#F38810" opacity="0.8" />
          <circle cx="12" cy="44" r="1.5" fill="#F38810" opacity="0.6" />
          
          <!-- Additional smaller grains -->
          <circle cx="30" cy="8" r="1" fill="#F38810" opacity="0.5" />
          <circle cx="18" cy="12" r="1" fill="#F38810" opacity="0.4" />
          <circle cx="42" cy="16" r="1" fill="#F38810" opacity="0.5" />
          <circle cx="6" cy="32" r="1" fill="#F38810" opacity="0.4" />
          <circle cx="38" cy="36" r="1" fill="#F38810" opacity="0.5" />
        </g>
      </svg>
    </div>
    
    <!-- Central grain icon -->
    <div class="absolute inset-0 flex items-center justify-center animate-pulse">
      <div class="w-3 h-3 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full shadow-lg"></div>
    </div>
  </div>
  
  {showText && (
    <div class="text-center">
      <p class="text-[#F38810] font-montserrat font-medium text-sm md:text-base animate-pulse">
        {text}
      </p>
      <div class="flex justify-center mt-2">
        <div class="flex space-x-1">
          <div class="w-2 h-2 bg-[#F38810] rounded-full animate-bounce"></div>
          <div class="w-2 h-2 bg-[#F38810] rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
          <div class="w-2 h-2 bg-[#F38810] rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
        </div>
      </div>
    </div>
  )}
</div>
